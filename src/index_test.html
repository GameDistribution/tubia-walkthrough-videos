<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Tubia</title>
    <meta name="description" content="Tubia walkthrough video's">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
            background: #333;
            margin: 0;
            padding: 0;
        }

        #tubia-container {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            width: 700px;
            height: 394px;
            margin: auto;
        }
    </style>
    <script>
        function getParameterByName(name) {
            name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
            var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                results = regex.exec(location.search);
            return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
        }

        var publisherIdLegacy = getParameterByName('pubid');
        var publisherId = (typeof publisherIdLegacy !== 'undefined' && publisherIdLegacy !== '') ? publisherIdLegacy : getParameterByName('publisherid');
        var gameId = getParameterByName('gameid');
        var gameTitle = getParameterByName('title');
        var urlLegacy = getParameterByName('url');
        var url = (typeof urlLegacy !== 'undefined' && urlLegacy !== '') ? urlLegacy : getParameterByName('pageurl');
        var pageUrl = (typeof url !== 'undefined' && url !== '') ? decodeURIComponent(url) : document.location.href;
        var domain = pageUrl.toLowerCase().replace(/^(?:https?:\/\/)?/i, '').split('/')[0];
        var colorMain = getParameterByName('colormain');
        var colorAccent = getParameterByName('coloraccent');
        var gdprTracking = getParameterByName('gdprtracking');
        var gdprTargeting = getParameterByName('gdprtargeting');
        var langLegacy = getParameterByName('lang');
        var lang = (typeof langLegacy !== 'undefined' && langLegacy !== '') ? langLegacy : getParameterByName('langcode');
        var debug = getParameterByName('debug');
        var testing = getParameterByName('testing');
        var videoInterval = getParameterByName('videointerval');

        window["TUBIA_OPTIONS"] = {
            "container": 'tubia-container',
            "publisherId": (typeof publisherId !== 'undefined' && publisherId !== '') ? publisherId : 'dc63a91fa184423482808bed4d782320',
            "gameId": (typeof gameId !== 'undefined' && gameId !== '') ? gameId : '0',
            "title": (typeof gameTitle !== 'undefined' && gameTitle !== '') ? gameTitle : 'Jewel Burst',
            "url": pageUrl,
            "domain": domain,
            "colorMain" : (typeof colorMain !== 'undefined' && colorMain !== '') ? '#' + colorMain : '',
            "colorAccent" : (typeof colorAccent !== 'undefined' && colorAccent !== '') ? '#' + colorAccent : '',
            "gdprTracking": (gdprTracking) ? gdprTracking : null,
            "gdprTargeting": (gdprTargeting) ? gdprTargeting : null,
            "langCode": (typeof lang !== 'undefined' && lang !== '') ? lang : 'en-us',
            "debug": (typeof debug !== 'undefined' && debug !== '' && debug !== 'false'),
            "testing": (typeof testing !== 'undefined' && testing !== '' && testing !== 'false'),
            "videoInterval": (videoInterval) ? videoInterval : null, // Todo: testing...
            onStart: function () {
                // console.log('Tubia started');
            },
            onFound: function (data) {
                // console.log(data);
            },
            onError: function (error) {
                // console.log(error);
            },
            onReady: function (player) {
                // console.log(player);
            },
        };
        (function (d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = './gd.js';
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'tubia-playerjs'));
    </script>
</head>

<body>

<div id="tubia-container"></div>

</body>

</html>